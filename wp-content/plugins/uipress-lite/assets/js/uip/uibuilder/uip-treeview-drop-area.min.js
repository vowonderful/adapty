const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{content:Array,returnData:Function,layout:String,dropAreaStyle:String},data:function(){return{items:this.content,activeTab:"blocks",emptyMessage:__("Drag blocks here","uipress-lite"),queryLoopEnabled:__("Block is using query loop","uipress-lite"),footerhideen:!1,drag:!1,activeBlock:this.returnActiveBlock,switchOptions:{blocks:{value:"blocks",label:__("Blocks","uipress-lite")},patterns:{value:"patterns",label:__("Patterns","uipress-lite")}}}},inject:["uipData","uiTemplate","router","uipress"],watch:{content:{handler(e,t){this.items=e},deep:!0}},computed:{returnActiveBlock(){return"uid"in this.$route.params&&this.$route.params.uid},returnItems(){return this.items}},methods:{itemAdded(e){if(e.added){let t=JSON.parse(JSON.stringify(this.uiTemplate.content)),i=e.added.element;"uid"in i?this.uipress.logHistoryChange(e.added.element.name+" "+__("block moved","uipress-lite"),t,!1):(i.uid=this.uipress.createUID(),this.uipress.logHistoryChange(e.added.element.name+" "+__("block added","uipress-lite"),t,!1)),0===Object.keys(i.settings).length&&this.uipress.inject_block_presets(i,i.settings)}this.returnData(this.items)},setdropAreaStylees(){let e=[];return e.class="uip-flex uip-flex-column uip-row-gap-xxs uip-w-100p",this.dropAreaStyle&&(e.style=this.dropAreaStyle),e},returnCardKey:e=>e.uid,returnDragStyle(){if(this.uiTemplate.drag)return"border-color:var(--uip-background-primary);"},openSettings(e){e.tabOpen=!e.tabOpen;let t=this.$route.params.templateID;this.router.push({path:"/uibuilder/"+t+"/settings/blocks/"+e.uid,query:{...this.$route.query}})},isActive(e){return"uid"in this.$route.params&&this.$route.params.uid==e},buildClasses(e){let t="uip-border-rounder uip-padding-xxs";return this.isActive(e.uid)?t+=" uip-background-primary-wash uip-text-bold":t+=" uip-background-muted",t}},template:'\n    <div class="uip-border-round uip-h-100p uip-w-100p uip-flex uip-drop-area uip-template-layers"\n\t  :style="returnDragStyle()" :class="{\'uip-drop-hightlight\' : uiTemplate.drag}">\n           \n\t\t\t<uip-draggable \n\t\t\t  class="uip-flex uip-flex-column uip-row-gap-xxs uip-w-100p"\n\t  \t\t:group="{ name: \'uip-blocks\', pull: true, put: true }"\n        :list="items"\n        \n\t\t\t  ghost-class="uip-block-ghost"\n        handle=".uip-block-drag"\n        animation="300"\n\t\t\t  :sort="true">\n        \n            \n          <div v-for="(element, index) in items" class="uip-border-round" :block-uid="element.uid" :key="element.uid">\n            <div class="uip-flex ui-flex-middle uip-flex-center uip-gap-xxs uip-block" style="min-width:160px" \n            :block-uid="element.uid"\n            :class="buildClasses(element)" >\n              \n              \n              <div class="uip-cursor-pointer uip-background-muted uip-icon uip-icon-small-emphasis uip-border-round uip-block-drag">drag_indicator</div>\n              <div class="uip-cursor-pointer uip-icon uip-icon-small-emphasis" @click="openSettings(element)">{{element.icon}}</div>\n              \n             \n              \n              <div class="uip-cursor-pointer uip-flex-grow uip-text-s uip-no-wrap uip-flex-center uip-flex-between uip-flex" @click="openSettings(element)">\n                <span>{{element.name}}</span>\n                <span :title="queryLoopEnabled" v-if="uipress.checkNestedValue(element, [\'query\', \'enabled\'])" class="uip-cursor-pointer uip-icon uip-icon-small-emphasis uip-text-l">all_inclusive</span>\n              </div>\n              \n              \x3c!--Chevs --\x3e\n              <div v-if="element.content" class="uip-ratio-1-1 uip-icon uip-padding-xxxs uip-text-l uip-line-height-1 uip-cursor-pointer uip-flex uip-flex-center uip-margin-left-xs" type="button" @click="element.tabOpen = !element.tabOpen">\n                <span v-if="!element.tabOpen">chevron_left</span>\n                <span v-if="element.tabOpen">expand_more</span>\n              </div>\n              \n            </div>\n            \n            <div v-if="element.tabOpen && element.content" class="uip-margin-left-s uip-margin-top-xxs">\n              \n              \x3c!--Block selector--\x3e\n              <div class="uip-flex uip-flex-center uip-flex-middle uip-flex-row uip-margin-bottom-xxs">\n                <drop-down width="260" dropPos="right" :onOpen="function(){uiTemplate.activePath = []}" triggerClass="uip-w-100p" class="uip-w-100p">\n                  <template v-slot:trigger>\n                    <div ref="footer" class="uip-text-muted uip-text-center uip-padding-xxs uip-text-center uip-icon uip-link-muted uip-border-rounder uip-border uip-cursor-pointer uip-w-100p uip-text-s" >add</div>\n                  </template>\n                  <template v-slot:content>\n                    <div class="uip-padding-s uip-max-w-300 uip-w-300 uip-max-h-300 uip-overflow-auto uip-scrollbar">\n                      <builder-blocks-list mode="click" :insertArea="element.content"></builder-blocks-list>\n                    </div>\n                  </template>\n                </drop-down>\n              </div>\n              \x3c!--End block selector--\x3e\n            \n            \n              <uip-treeview-drop-area :content="element.content" :returnData="function(data){element.content = data}" ></uip-treeview-drop-area>\n            </div>\n          </div>  \n          \n        \n        \n        \n        \n        \n\t\t\t</uip-draggable>\n      \n      \n\n\t    \t\n\t\t</div>'}};