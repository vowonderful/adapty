export function moduleData(){return{props:{display:String,block:Object,itemIndex:Number,currentContent:Array},data:function(){return{hover:!1,delay:200,selected:!1,windowWidth:window.innerWidth,blockStyles:this.updateBlockStyle(),tips:[]}},inject:["uipData","uiTemplate","router","uipress"],watch:{returnSettings:{handler(e,t){JSON.stringify(e)!=JSON.stringify(t)&&(this.blockStyles=this.updateBlockStyle())},deep:!0},"uipData.templateDarkMode":{handler(e,t){this.blockStyles=this.updateBlockStyle()}},"$route.params.uid":{handler(e,t){}}},mounted:function(){let e=this;e.showInlineOptions(),document.addEventListener("uip_builder_preview_change",function(t){e.blockStyles=e.updateBlockStyle()})},computed:{returnSettings(){return JSON.parse(JSON.stringify(this.block.settings))}},methods:{showInlineOptions(){let e=this;e.selected=!1,e.$route.params.uid==e.block.uid?e.selected=!0:e.selected=!1;let t=document.getElementById("uip-ui-preview-area").querySelector("#"+e.block.uid);t&&(e.selected?t.classList.add("uip-preview-selected-block"):t.classList.remove("uip-preview-selected-block"))},getBlockStyles(){return this.blockStyles},updateBlockStyle(){return this.uipress.render_block_styles(this.block.settings,this.block.uid,this.uipData.templateDarkMode,this.windowWidth)},openSettings(){let e=this.$route.params.templateID;this.router.push("/uibuilder/"+e+"/settings/blocks/"+this.block.uid)},removeBlock(){this.block.uid;this.currentContent.splice(this.itemIndex,1)},duplicateBlock(){let e=Object.assign({},this.currentContent[this.itemIndex]);e.uid=this.uipress.createUID(),e.options=[],e.settings=JSON.parse(JSON.stringify(e.settings)),this.currentContent.splice(this.itemIndex+1,0,e)},pushActiveHover(e,t,i){let s=this;s.addHoverLogic(i)},removeActiveHover(){let e=this.uiTemplate.activePath.findIndex(e=>e.id===this.block.uid),t=this;t.$refs.container.classList.remove("uip-hover-selected-block"),t.hover=!1,t.removeTooltip(),setTimeout(function(){t.uiTemplate.activePathLock?t.removeActiveHover():t.hover||t.uiTemplate.activePath.splice(e,1)},200)},ifHasCss(){return!!(this.block.settings.advanced&&this.block.settings.advanced.options.css&&this.block.settings.advanced.options.css.value)},ifHasJS(){return!!(this.block.settings.advanced&&this.block.settings.advanced.options.js&&this.block.settings.advanced.options.js.value)},removeTooltip(){for(const e of this.tips)e.remove();this.tips=[]},showTooltip(){let e=this;if(!("tooltip"in this.block))return;if(!("message"in this.block.tooltip))return;if(""==this.block.tooltip.message)return;let t=this.block.tooltip.message,i=document.createElement("div");i.classList.add("uip-tooltip"),i.classList.add("uip-fade-in"),i.classList.add("uip-hidden"),i.setAttribute("id","tooltip-"+e.block.uid),i.innerHTML=t;let s=document.body.appendChild(i),o=document.getElementById(e.block.uid);e.tips.push(s);let n=o.getBoundingClientRect().bottom,l=o.getBoundingClientRect().width/2,c=n+10,d=o.getBoundingClientRect().left;i.style.top=c+"px",i.style.left=d+l+"px",i.style.transform="translateX(-50%)",e.delay=200,this.block.tooltip.delay&&Number.isInteger(parseInt(this.block.tooltip.delay))&&(e.delay=this.block.tooltip.delay),setTimeout(function(){if(!e.hover){let t=document.getElementById("tooltip-"+e.block.uid);return void(t&&t.remove())}document.getElementById("tooltip-"+e.block.uid).classList.remove("uip-hidden"),setTimeout(function(){e.removeTooltip()},3e3)},e.delay)},responsiveHidden(e){if(void 0===e)return!0;if(!e)return!0;let t=window.innerWidth;return"windowWidth"in this.uiTemplate&&(t=this.uiTemplate.windowWidth),!(1==e.mobile&&t<699)&&(!(1==e.tablet&&t<990&&t>=699)&&!(1==e.desktop&&t>990))},addHoverLogic(e){let t=e.target.closest(".uip-block-builder-container");t.getAttribute("block-uid")!=this.block.uid?this.$refs.container.classList.remove("uip-hover-selected-block"):t.classList.add("uip-hover-selected-block")}},template:'\n    \n    <div ref="container" v-if="responsiveHidden(block.responsive)" class="uip-position-relative uip-flex uip-block-builder-container" \n    :block-uid="block.uid" :class="{\'uip-border-dashed\' : uiTemplate.display == \'builder\'}"\n    @mouseenter="pushActiveHover(block, block.uid, $event)" @mouseleave="removeActiveHover()" :id="\'container-\' + block.uid">\n    \n        <component is="style">\n          {{blockStyles}}\n        </component>\n        \n        <component is="style" v-if="ifHasCss()">{{block.settings.advanced.options.css.value}}</component>\n        \n        <component is="script" scoped v-if="ifHasJS()">\n          {{block.settings.advanced.options.js.value}}\n        </component>\n        \n\t  \t\t<slot name=""></slot>\n        \n        \n\t\t</div>\n    \n\n      \n      \n    '}};