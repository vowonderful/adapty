export function moduleData(){return{props:{hover:Boolean,dropPos:String,externalOpen:Boolean,triggerClass:String,containerClass:String,onOpen:Function,shortCut:[Boolean,String,Array],dontAnimate:Boolean,screenHeight:Array,slotClass:String,dropClass:String,relative:Boolean,removeOverflow:Boolean},data:function(){return{modelOpen:!1,dropWidth:0,position:this.dropPos,animationClass:"slide-down",hovering:!1,isRelative:!1}},watch:{externalOpen:{handler(t,e){t&&this.openThisComponent()},deep:!0}},mounted:function(){this.mountShortcut(),this.externalOpen&&this.openThisComponent()},destroyed(){document.removeEventListener("scroll",this.handleScroll,!0)},unmounted(){document.removeEventListener("scroll",this.handleScroll,!0)},computed:{returnAnimationClass(){return this.dontAnimate?"":this.animationClass},returnRelativePos(){let t="";return this.position.includes("top")&&(t+="bottom: 0;"),this.position.includes("right")&&(t+="right: 0;"),this.position.includes("left")&&(t+="left: 0;"),this.position.includes("bottom")&&(t+="top: 0;"),"left"==this.position&&(t="right: 0; top: 0;"),"right"==this.position&&(t="left: 0; top: 0;"),t},returnFullHeightStyle(){if(this.screenHeight)return`max-height: calc( 100vh - ${this.screenHeight[0]}px)`}},methods:{mountShortcut(){if(!this.shortCut)return;let t=JSON.parse(JSON.stringify(this.shortCut)),e=[];window.addEventListener("keydown",i=>{let o=!1;e.push(i.key.toString()),o=!0;for(let i of t)if(!e.includes(i)){o=!1;break}o&&this.openThisComponent()}),window.addEventListener("keyup",t=>{e=[]})},handleScroll(t){this.setPosition()},onClickOutside(t){if(!this.$refs.uipdrop)return;const e=document.getElementById("uip-media-library");this.$refs.droptrigger.contains(t.target)||this.$refs.uipdrop.contains(t.target)||e&&e.contains(t.target)||this.closeThisComponent()},openThisComponent(t){t.preventDefault,this.modelOpen?this.closeThisComponent():(this.modelOpen=!0,1==this.modelOpen&&document.addEventListener("scroll",this.handleScroll,!0),requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!0);let t=document.getElementsByClassName("uip-page-content-frame");t[0]&&t[0].contentWindow.document.body.addEventListener("click",this.onClickOutside,!0),this.onOpen&&this.onOpen(),requestAnimationFrame(()=>{this.setPosition()})}))},closeThisComponent(){this.modelOpen=!1,document.documentElement.removeEventListener("click",this.onClickOutside,!0),document.removeEventListener("scroll",this.handleScroll,!0);let t=document.getElementsByClassName("uip-page-content-frame");t[0]&&t[0].contentWindow.document.body.removeEventListener("click",this.onClickOutside,!0)},setRelativePosition(){if(self=this,!self.$el)return;let t=self.$refs.uipdrop,e=self.$refs.droptrigger;if(!t||!e)return;this.position||(this.position="bottom-left");let i="auto",o="auto",n="auto",s="auto";"bottom-left"==this.position&&(i="calc(100% + 8px)",n=0),"bottom-right"==this.position&&(i="calc(100% + 8px)",s=0),"right"==this.position&&(i=0,n="calc(100% + 8px)"),"left"==this.position&&(i=0,s="calc(100% + 8px)"),"top-left"==this.position&&(o="calc(100% + 8px)",n=0),"top-right"==this.position&&(o="calc(100% + 8px)",s=0),this.position.includes("top")&&(this.animationClass="slide-up"),t.style.bottom=o,t.style.left=n,t.style.right=s,t.style.top=i,this.screenHeight&&(t.style.top=this.screenHeight[0]+"px",t.style.bottom=0,t.style.left=e.getBoundingClientRect().right+"px",t.style.right="auto")},setPosition(){self=this;if(!self.$el)return;if(this.relative)return this.isRelative=!0,void this.setRelativePosition();let t=document.getElementById("uip-ui-preview-area");if(t&&t.contains(self.$refs.uipdrop))return this.isRelative=!0,void this.setRelativePosition();this.isRelative=!1;let e=self.$refs.uipdrop,i=self.$refs.droptrigger;if(!e||!i)return;let o="auto",n="auto",s="auto",l="auto";this.position||(this.position="bottom-left"),e.getBoundingClientRect().bottom>window.innerHeight-20&&(this.position=this.dropPos.replace("bottom","top"),"left"==this.dropPos&&(this.position="left-center"),"right"==this.dropPos&&(this.position="top-left")),e.getBoundingClientRect().right>window.innerWidth-20&&("right"==this.dropPos&&(this.position="left"),"bottom-left"!=this.dropPos&&"top-left"!=this.dropPos||(this.position=this.dropPos.replace("left","right"))),e.getBoundingClientRect().left<20&&("top-right"==this.dropPos&&this.position,"left"==this.dropPos&&(this.position=this.position.replace("left","right"))),this.position&&"bottom-left"!=this.position||(o=i.getBoundingClientRect().bottom+10+"px",s=i.getBoundingClientRect().left+"px"),"top-left"==this.position&&(n=window.innerHeight-i.getBoundingClientRect().top+10+"px",s=i.getBoundingClientRect().left+"px"),"bottom-right"==this.position&&(o=i.getBoundingClientRect().bottom+10+"px",l=window.innerWidth-i.getBoundingClientRect().right+"px"),"top-right"==this.position&&(n=window.innerHeight-i.getBoundingClientRect().top+10+"px",l=window.innerWidth-i.getBoundingClientRect().right+"px"),"right"==this.position&&(o=i.getBoundingClientRect().top+"px",s=i.getBoundingClientRect().right+10+"px"),"left"==this.position&&(o=i.getBoundingClientRect().top+"px",l=window.innerWidth-i.getBoundingClientRect().left+10+"px"),"left-center"==this.position&&(o=i.getBoundingClientRect().top-e.offsetHeight/2+"px",l=window.innerWidth-i.getBoundingClientRect().left+10+"px"),"top"==this.position&&(n=window.innerHeight-i.getBoundingClientRect().top+10+"px"),this.position.includes("top")&&(this.animationClass="slide-up"),e.style.bottom=n,e.style.left=s,e.style.right=l,e.style.top=o,this.screenHeight&&(e.style.top=this.screenHeight[0]+"px",e.style.bottom=0,e.style.left=i.getBoundingClientRect().right+"px",e.style.right="auto",e.style.zIndex="99999",this.animationClass="")},openOnHover(){if(this.hover){let t=this;t.hovering=!0,setTimeout(function(){t.hovering&&(t.modelOpen=!0,requestAnimationFrame(()=>{document.documentElement.addEventListener("click",t.onClickOutside,!0),t.onOpen&&t.onOpen(),t.hover&&t.setPosition()}))},200)}},closeOnHover(){if(this.hover){let t=this;t.hovering=!1,t.modelOpen=!1}},containerClasses(){let t="";return this.slotClass&&(t+=this.slotClass),this.removeOverflow||(t+=" uip-overflow-auto"),t}},template:'\n      <div class="uip-position-relative uip-overflow-visible" @mouseover="openOnHover()" @mouseleave="closeOnHover()" :class="containerClass">\n      \n\t  \t  <div class="uip-flex uip-w-100p">\n\t\t  \t\t<div class="uip-cursor-pointer" :class="triggerClass" ref="droptrigger" @click="openThisComponent($event)"><slot name="trigger"></slot></div>\n\t\t\t    <slot name="post-trigger"></slot>\n\t\t    </div>\n        \n        <Transition :name="returnAnimationClass" @after-enter="setPosition">\n        \n\t\t      <div v-if="modelOpen && $slots.content" ref="uipdrop" class="uip-z-index-9999 uip-modal-open" :class="isRelative ? \'uip-position-absolute \' + dropClass : \'uip-position-fixed \' + dropClass">\n              \n                    \n            <div class="uip-position-relative uip-h-100p">\n              <div v-if="hover" style="position: absolute; background: rgba(0,0,0,0); inset: -20px; z-index:0;" tabIndex="0"></div>\n              <div class="uip-position-relative uip-shadow uip-dropdown-conatiner uip-background-default uip-border-rounder uip-border uip-margin-xl uip-z-index-1" :class="containerClasses()"\n              :style="returnFullHeightStyle">\n                <slot name="content"></slot>\n              </div>\n            </div>\n                      \n              \n          </div>\n          \n        </Transition>\n        \n\t    </div>'}};